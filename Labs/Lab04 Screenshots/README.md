# Lab04 Screenshots

---

## workAround
````powershell
npx mocha test_login.spec.js
````

````js
// smartSleep.js - func ext - convert alias to takeScreenshot from export side
const fs = require('fs');

async function smartSleep(driver, arg) {
  if (arg === "take_screenshot" || arg === take_screenshot) {
    let screenshot = await driver.takeScreenshot();
    fs.writeFileSync(`screenshot_${Date.now()}.png`, screenshot, 'base64');
  } else {
    await driver.sleep(arg);
  }
}

module.exports = { smartSleep };
````

````js
// test_login.spec.js
// Generated by Selenium IDE by export in javascript mocha
const { Builder, By, Key, until } = require('selenium-webdriver')
const assert = require('assert')
const { smartSleep } = require('./smartSleep')

describe('Untitled', function() {
  this.timeout(30000)
  let driver
  let vars
  beforeEach(async function() {
    driver = await new Builder().forBrowser('chrome').build()
    vars = {}
  })
  afterEach(async function() {
    await driver.quit();
  })
  it('Untitled', async function() {
    await driver.get("https://www.saucedemo.com/")
    await smartSleep(driver, "take_screenshot")
    await driver.findElement(By.id("user-name")).sendKeys("standard_user")
  })
})
````
